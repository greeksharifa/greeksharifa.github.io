<!DOCTYPE html>
<html lang="en-us">
<head>
  <head>
  <!-- Description of Blog -->
  <meta name="description" content="Python, Machine & Deep Learning">
  <link rel="canonical" href="https://greeksharifa.github.io/">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Python, Machine & Deep Learning">
  <meta property="og:description" content="Python, Machine Learning & Deep Learning 설명서">
  <meta property="og:image" content="https://greeksharifa.github.io/public/img/icon-144x144.png">
  <meta property="og:url" content="https://greeksharifa.github.io/">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Python, Machine & Deep Learning">
  <meta name="twitter:description" content="Python, Machine Learning & Deep Learning 설명서">
  <meta name="twitter:image" content="https://greeksharifa.github.io/public/img/icon-144x144.png">
  <meta name="twitter:domain" content="https://greeksharifa.github.io/">

  <!-- link -->
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  
  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      파이썬 logging Module 설명
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/main.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="icon-144x144" sizes="144x144" href="/public/img/icon-144x144.png">
  <link rel="shortcut icon" href="/public/img/icon_32x32.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  
  <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_SVG"> </script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } });
  </script>
  

  <!-- Ads -->
  <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
  </script>
</head>

  <!-- for Google AdSense-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-9951774327887666",
    enable_page_level_ads: true
  });
</script>

  <style>blockquote {
    font-size: 1em;
    line-height: 1.4
  }</style>
  <link href='http://fonts.googleapis.com/css?family=Gill+Sans' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Consolas' rel='stylesheet' type='text/css'>
</head>
<body>

<!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <div class="sidebar-personal-info">
      <div class="sidebar-personal-info-section">
        <a href="http://gravatar.com/3c2986ad7ac1f2230ea3596f44563328">
          <img src="/public/img/maple_tree.jpg" title="Cover Photo" alt="Maple tree" />
        </a>
      </div>
      <div class="sidebar-personal-info-section">
        <p><strong>Developer and Analyst</strong>, YW & YY.</p>
      </div>
      
      
      
      <div class="sidebar-personal-info-section">
        <p> Follow me:
        
        
        
        <a href="https://github.com/greeksharifa">
          <i class="fa fa-github" aria-hidden="true"></i>
        </a>
        
        |
        
        
        
        <a href="mailto:greeksharifa@gmail.com">
          <i class="fa fa-envelope" aria-hidden="true"></i>
        </a>
        
        
        
        </p>
      </div>
      
    </div>
  </div>

  <nav class="sidebar-nav">
    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/">
          Home
        </a>

        
      </span>

    
      
      
      

      

      <span class="foldable">
        <a class="sidebar-nav-item " href="/blog/">
          Blog
        </a>

        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/categories/">
                Categories
              </a>
          
        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/tags/">
                Tags
              </a>
          
        
      </span>

    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/about/">
          About
        </a>

        
      </span>

    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="http://greeksharifa.github.io/">
          Github Project
        </a>

        
      </span>

    

  </nav>

  <div class="sidebar-item">
    <p>
    &copy; 2020 YW & YY. This work is liscensed under <a href="http://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a>.
    </p>
  </div>

  <div class="sidebar-item">
    <p>
    Powered by <a href="http://jekyllrb.com">jekyll</a> and <a href="http://greeksharifa.github.io">YW & YY</a>
    </p>
  </div>
</div>


<!-- Wrap is the content to shift when toggling the sidebar. We wrap the
     content to avoid any CSS collisions with our real content. -->
<div class="wrap">
  <div class="masthead">
    <div class="container">
      <h3 class="masthead-title" align="center">
        <a href="/" title="Home" title="YW & YY">
          <img class="masthead-logo" src="/public/img/logo.png"/>
        </a>
        <small>YW & YY's Python, Machine & Deep Learning</small>
        <!-- HTML elements for search -->
        <a href="/search/" id="search_icon">
          <img src="/public/img/search.png" width="25" height="25"
               align="right" style="margin-top:5px; margin-bottom:0;"
               onmouseover="this.style.opacity=0.7" onmouseout="this.style.opacity=0.5"
               alt="search">
        </a>
      </h3>
    </div>
  </div>

  <div class="container content">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.9/styles/github.min.css"> 
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.9/highlight.min.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 수직형 디스플레이 광고1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-9951774327887666"
     data-ad-slot="7237421728"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<div class="post">
  <h1 class="post-title">파이썬 logging Module 설명</h1>
  <span class="post-date">13 Dec 2019</span>
   |
  
  <a href="/blog/tags/#파이썬" class="post-tag">파이썬</a>
  
  <a href="/blog/tags/#references" class="post-tag">References</a>
  
  
  <article>
    <p><strong>목차</strong></p>
    <ul>
  <li><a href="#1-logging-module-소개">1. logging Module 소개</a>
    <ul>
      <li><a href="#11-introduction">1.1. Introduction</a></li>
      <li><a href="#12-작동-원리-확인">1.2. 작동 원리 확인</a></li>
    </ul>
  </li>
  <li><a href="#2-실질적인-사용법">2. 실질적인 사용법</a>
    <ul>
      <li><a href="#21-차례대로-logging-준비하기">2.1. 차례대로 logging 준비하기</a>
        <ul>
          <li><a href="#211-logger-생성">2.1.1. logger 생성</a></li>
          <li><a href="#212-logger에-level-부여하기">2.1.2. logger에 level 부여하기</a></li>
          <li><a href="#213-handler와-formatter-설정하기">2.1.3. handler와 formatter 설정하기</a></li>
          <li><a href="#214-logger에-생성한-handler-추가하기">2.1.4. logger에 생성한 handler 추가하기</a></li>
        </ul>
      </li>
      <li><a href="#22-빠른-setting">2.2. 빠른 Setting</a>
        <ul>
          <li><a href="#221-json-파일로-세팅">2.2.1. json 파일로 세팅</a></li>
          <li><a href="#222-코드로-세팅">2.2.2. 코드로 세팅</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#3-format-편리하게-설정하기">3. Format 편리하게 설정하기</a></li>
  <li><a href="#reference">Reference</a></li>
</ul>

    <h2 id="1-logging-module-소개">1. logging Module 소개</h2>
<h3 id="11-introduction">1.1. Introduction</h3>
<p>logging 모듈은 파이썬 자체에 내장되어 있는 모듈로 사용이 간편함에도 불구하고 훌륭한 기능으로 널리 사용되고 있다. logging은 소프트웨어가 작동 중일 때 발생하는 여러 ‘사건’을 추적하고, 개발자는 이를 통해 어떤 ‘사건’이 발생하였고 따라서 앞으로 어떤 해결책을 강구해야 할지 판단하게 된다. 이러한 ‘사건’들은 각각 중요도가 다를 것인데, 본 logging 모듈은 이 중요도를 <strong>level</strong>이라고 정의하고 있다. <strong>level</strong>에 대한 설명은 아래 1.2장에서 확인할 수 있다.</p>

<p>지금은 잠시 간단한 예시를 확인해 보자. 예를 들어 다음과 같은 메서드를 만들었다고 하자.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">cal</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">a</span><span class="o">/</span><span class="n">b</span>
    <span class="k">except</span> <span class="nb">ZeroDivisionError</span><span class="p">:</span>
        <span class="n">logger</span><span class="p">.</span><span class="n">exception</span><span class="p">(</span><span class="s">"Division by zero is not possible"</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span>
</code></pre></div></div>

<p>당연하게도 b에 0을 대입하면 에러가 발생할 것이다. 개발 코드 중에 실수로 b에 0을 대입할 가능성이 있다고 하자. 그렇다면 언제 어떻게 에러가 발생하는지 기록으로 남겨두면 좋을 것이다. 그래야 디버깅이 편리하고 효율적으로 이루어질 수 있다.</p>

<p>실제로 에러가 발생하면 다음과 같은 형식으로 메시지가 뜰 것이다.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cal</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">12</span> <span class="mi">22</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mi">49</span><span class="p">,</span><span class="mi">091</span> <span class="o">-</span> <span class="n">root</span> <span class="o">-</span> <span class="n">ERROR</span> <span class="o">-</span> <span class="n">Division</span> <span class="n">by</span> <span class="n">zero</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">possible</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;ipython-input-38-41356b58271d&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">3</span><span class="p">,</span> <span class="ow">in</span> <span class="n">cal</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">a</span><span class="o">/</span><span class="n">b</span>
<span class="nb">ZeroDivisionError</span><span class="p">:</span> <span class="n">division</span> <span class="n">by</span> <span class="n">zero</span>
</code></pre></div></div>

<p>위에서 볼 수 있는 메시지의 형식과 내용 등은 모두 logging 모듈로 제어할 수 있다. 예를 들어 root의 경우 RootLogger을 의미하는데, 사용자가 직접 설정한 Logger 이름이 출력되게 할 수 있다. 이러한 기능은 수많은 파일과 class 등이 난무할 때 어디서 문제가 발생하였는지 쉽게 알 수 있게 해줄 것이다.</p>

<p>본 글은 우선적으로 logging 모듈의 가장 기본적인 기능들을 정리하는 데에 초점을 맞추었다. logger Module에 대해 더욱 자세히 알고 싶다면 아래 Reference에 있는 참고 사이트를 확인하길 바란다.</p>

<h3 id="12-작동-원리-확인">1.2. 작동 원리 확인</h3>
<p>1) Level 설정<br />
logging은 <strong>level</strong> 설정을 통해 메시지의 중요도를 구분한다. 총 5개의 기본 <strong>level</strong>이 제공되는데, 설정에 변화를 주지 않는다면 <strong>WARNING</strong>이 기본 <strong>level</strong>로 지정되어 있다.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Level</th>
      <th style="text-align: center">설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">DEBUG</td>
      <td style="text-align: center">간단히 문제를 진단하고 싶을 때 필요한 자세한 정보를 기록함</td>
    </tr>
    <tr>
      <td style="text-align: center">INFO</td>
      <td style="text-align: center">계획대로 작동하고 있음을 알리는 확인 메시지</td>
    </tr>
    <tr>
      <td style="text-align: center">WARNING</td>
      <td style="text-align: center">소프트웨어가 작동은 하고 있지만,<br /><br />예상치 못한 일이 발생했거나 할 것으로 예측된다는 것을 알림</td>
    </tr>
    <tr>
      <td style="text-align: center">ERROR</td>
      <td style="text-align: center">중대한 문제로 인해 소프트웨어가 몇몇 기능들을 수행하지 못함을 알림</td>
    </tr>
    <tr>
      <td style="text-align: center">CRITICAL</td>
      <td style="text-align: center">작동이 불가능한 수준의 심각한 에러가 발생함을 알림</td>
    </tr>
  </tbody>
</table>

<p>2) logging work flow 확인<br />
본 모듈을 작동시키는 중요한 구성 요소들은 아래와 같다.</p>
<blockquote>
  <p>logger, handler, filter, formatter</p>
</blockquote>

<p>Log 사건 정보들은 LogRecord Instance 안에 있는 위 요소들 사이에서 전송되는 것이다.</p>

<p>이들의 역할을 알아보면,</p>

<p><strong>Logger</strong>: 어플리케이션 코드가 직접 사용할 수 있는 인터페이스를 제공함<br />
<strong>Handler</strong>: logger에 의해 만들어진 log 기록들을 적합한 위치로 보냄<br />
<strong>Filter</strong>: 어떤 log 기록들이 출력되어야 하는지를 결정함<br />
<strong>Formatter</strong>: log 기록들의 최종 출력본의 레이아웃을 결정함</p>

<p>logging은 <strong>Logger class</strong>의 Instance (=logger)를 선언하는 것으로 부터 시작한다. 각 logger는 <strong>name</strong>을 가지는데, 이 <strong>name</strong>들은 <strong>마침표</strong>를 통해 계층적 관계를 형성하게 된다. 즉 예를 들어 <strong>Basket.html</strong>이라는 logger가 있다고 한다면, 이는 <strong>Basket</strong>이라는 logger가 <strong>html</strong>이라는 logger의 부모 역할을 하게 되는 것이다. 파이썬의 부모-자식 상속 관계를 투영한 것으로, 설정을 변화시키지 않으면 자식 logger는 부모 logger의 여러 특성들을 물려받게 된다.</p>

<p>이후 <strong>Handler</strong>를 통해 log 기록들을 어디에 표시하고, 어디에 기록할지 결정하게 된다. <strong>Filter</strong>는 logging 모듈을 간단히 사용할 때는 잘 쓰이지는 않지만 <strong>level</strong>보다 더 복잡한 필터링을 원할 때 사용된다.</p>

<p><strong>Formatter</strong>는 실제로 출력되는 형식을 결정한다.</p>

<p>work flow에 대해 더욱 자세히 알고 싶다면 <a href="https://docs.python.org/3.7/library/logging.html#filter">이곳</a>을 참조하기 바란다.</p>

<hr />
<h2 id="2-실질적인-사용법">2. 실질적인 사용법</h2>
<h3 id="21-차례대로-logging-준비하기">2.1. 차례대로 logging 준비하기</h3>
<h4 id="211-logger-생성">2.1.1. logger 생성</h4>
<p>logging instance인 logger는 아래와 같은 구문으로 생성한다.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s">"name"</span><span class="p">)</span>
</code></pre></div></div>

<p>위 <strong>“name”</strong> 에는 String이 들어가는데, 아무것도 입력하지 않을 경우 <strong>root logger</strong>가 생성된다.</p>

<p><strong>root logger</strong>는 모든 logger의 부모와 같은 존재로, 다른 모든 logger는 설정을 변화시키지 않으면 <strong>root logger</strong>의 자식이다. <strong>root logger</strong>을 바로 사용할 수도 있지만, 기능과 목적에 따라 다른 logger들을 생성하는 것이 낫다.</p>

<h4 id="212-logger에-level-부여하기">2.1.2. logger에 level 부여하기</h4>
<p>logger를 생성했다면, 이제는 기본적인 <strong>level</strong>을 부여해줄 차례다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">logger</span><span class="p">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="p">.</span><span class="n">INFO</span><span class="p">)</span>
</code></pre></div></div>

<p>앞서 생성한 logger에 INFO <strong>level</strong>을 부여하였다. 이제 이 logger 객체는 <strong>INFO</strong> 이상의 메시지를 출력할 수 있다.<br />
<strong>level</strong>을 소문자로 바꾸어 메서드로 사용하면 메시지를 출력할 수 있다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">logger</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="s">"Message"</span><span class="p">)</span>
</code></pre></div></div>

<p>현재로서 이 logger는 오직 console에만 메시지를 출력할 수 있을 뿐이다. 더욱 정교하게 만들기 위해서는 <strong>handler</strong>가 필요하다.</p>

<h4 id="213-handler와-formatter-설정하기">2.1.3. handler와 formatter 설정하기</h4>
<p><strong>handler</strong> object는 log 메시지의 <strong>level</strong>에 따라 적절한 log 메시지를 지정된 위치에 전달(dispatch)하는 역할을 수행한다.</p>

<p>logger는 <strong>addHandler</strong> 메서드를 통해 이러한 handler를 추가할 수 있다. <strong>handler</strong>는 기능과 목적에 따라 여러 개일 수 있으며, 각 handler는 다른 level과 다른 format을 가질 수도 있다.</p>

<p><strong>handler</strong>의 종류는 15개 정도가 있는데, 가장 기본적인 것은 <strong>StreamHandler</strong>와 <strong>FileHandler</strong>이다. 전자는 Stream(console)에 메시지를 전달하고, 후자는 File(예를 들어 info.log)에 메시지를 전달하는 역할을 한다. 다른 <strong>handler</strong>가 궁금하다면 <a href="https://docs.python.org/3.7/howto/logging.html#useful-handlers">이곳</a>을 참조하기 바란다.</p>

<p><strong>handler</strong> 객체의 level까지 설정했다면, 이제 이 메시지를 어떤 형식으로 출력할지에 대해 고민해야 한다.<br />
이 때 필요한 것이 <strong>formatter</strong>이다. 아래와 같이 생성한다. format을 좀 더 편리하게 작성하는 방법에 대해서는 3장에서 설명하겠다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">logging</span><span class="p">.</span><span class="n">Formatter</span><span class="p">(</span>
  <span class="n">fmt</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>     <span class="c1"># 메시지 출력 형태. None일 경우 raw 메시지를 출력.
</span>  <span class="n">datefmt</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="c1"># 날짜 출력 형태. None일 경우 '%Y-%m-%d %H:%M:%S'.
</span>  <span class="n">style</span> <span class="o">=</span> <span class="s">'%'</span>     <span class="c1"># '%', '{', '$' 중 하나. `fmt`의 style을 결정.
</span><span class="p">)</span>
</code></pre></div></div>

<p>이제 준비는 끝났다. handler 객체는 아래와 같이 만들어진다.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># handler 객체 생성
</span><span class="n">stream_handler</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="n">StreamHandler</span><span class="p">()</span>
<span class="n">file_handler</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="n">FileHandler</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s">"information.log"</span><span class="p">)</span>

<span class="c1"># formatter 객체 생성
</span><span class="n">formatter</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="n">Formatter</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s">"%(asctime)s - %(name)s - %(levelname)s - %(message)s"</span><span class="p">)</span>

<span class="c1"># handler에 level 설정
</span><span class="n">stream_handler</span><span class="p">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="p">.</span><span class="n">INFO</span><span class="p">)</span>
<span class="n">file_handler</span><span class="p">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="p">.</span><span class="n">DEBUG</span><span class="p">)</span>

<span class="c1"># handler에 format 설정
</span><span class="n">stream_handler</span><span class="p">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
<span class="n">file_handler</span><span class="p">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
</code></pre></div></div>

<p>부가적으로 하나 더 설명하자면, 위에 있는 간단한 예시의 경우 단지 하나의 logger를 생성했을 뿐이지만, 실제로는 여러개의 logger를 계층적으로 사용할 가능성이 높다. 이러한 계층적인 구조와 관련하여, 앞의 1.2장에서 언급한 부모-자식 관계와 관련하여 염두에 두어야 할 부분이 있다.</p>

<p>자식 logger는 부모 logger와 관련된 handler로 메시지를 <strong>전파</strong>(propagate)한다. 즉, 부모 logger의 설정은 자식 logger과 연결되어 있다. 이 때문에 사실 모든 logger에 대해 handler를 일일히 정의하고 설정하는 것은 불필요한 일이라고 볼 수 있다. 따라서 가장 효율적인 방법은 최상위 logger에 대해 handler 설정을 완료하고 때에 따라 자식 logger를 생성하는 것이 될 것이다. 만약 이러한 연결을 원치 않는다면, 아래와 같이 logger의 propagate attribute를 False로 설정해주면 된다.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">logger</span><span class="p">.</span><span class="n">propagate</span> <span class="o">=</span> <span class="bp">False</span>
</code></pre></div></div>

<h4 id="214-logger에-생성한-handler-추가하기">2.1.4. logger에 생성한 handler 추가하기</h4>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">logger</span><span class="p">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">stream_handler</span><span class="p">)</span>
<span class="n">logger</span><span class="p">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">file_handler</span><span class="p">)</span>
</code></pre></div></div>

<p>위 과정을 거치면, 지금까지 설정한 모든 것들이 logger에 담기게 된다.</p>

<h3 id="22-빠른-setting">2.2. 빠른 Setting</h3>
<p>위에서 차근차근 알아본 logging 모듈 사용법을 확실히 익혔다면, 기본적인 Setting 환경을 만들어두고 이를 조금씩 변형하여 사용하는 것이 편리할 것이다.</p>

<p>Setting을 진행하는 방법에는 여러가지가 있는데, 본 글에서는 그 중 1) json 파일로 setting하는 법과 2) 파이썬 코드로 하는 법에 대해 설명할 것이다. 본 예제에서는 INFO를 기본 level로 설정한다.</p>

<h4 id="221-json-파일로-세팅">2.2.1. json 파일로 세팅</h4>
<p>아래와 같은 json 파일을 만들어보자.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="s">"version"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s">"formatters"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"basic"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"format"</span><span class="p">:</span> <span class="s">"%(asctime)s - %(name)s - %(levelname)s - %(message)s"</span>
        <span class="p">}</span>
    <span class="p">},</span>

    <span class="s">"handlers"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"console"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"class"</span><span class="p">:</span> <span class="s">"logging.StreamHandler"</span><span class="p">,</span>
            <span class="s">"level"</span><span class="p">:</span> <span class="s">"INFO"</span><span class="p">,</span>
            <span class="s">"formatter"</span><span class="p">:</span> <span class="s">"basic"</span><span class="p">,</span>
            <span class="s">"stream"</span><span class="p">:</span> <span class="s">"ext://sys.stdout"</span>
        <span class="p">},</span>

        <span class="s">"file_handler"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"class"</span><span class="p">:</span> <span class="s">"logging.FileHandler"</span><span class="p">,</span>
            <span class="s">"level"</span><span class="p">:</span> <span class="s">"DEBUG"</span><span class="p">,</span>
            <span class="s">"formatter"</span><span class="p">:</span> <span class="s">"basic"</span><span class="p">,</span>
            <span class="s">"filename"</span><span class="p">:</span> <span class="s">"info.log"</span>
        <span class="p">}</span>
    <span class="p">},</span>

    <span class="s">"root"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"level"</span><span class="p">:</span> <span class="s">"INFO"</span><span class="p">,</span>
        <span class="s">"handlers"</span><span class="p">:</span> <span class="p">[</span><span class="s">"console"</span><span class="p">,</span> <span class="s">"file_handler"</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>첫 문단에서 <strong>basic</strong>이라는 이름의 format을 만들었다. 앞으로 설정을 변경하지 않는 이상 [시간-logger이름-level이름-메시지] 형식으로 출력됨을 의미한다.</p>

<p>두 번째 문단과 세 번째 문단은 2개의 handler에 대한 설정이다. <strong>console</strong>은 말 그대로 console(Stream)에 출력되는 handler로, logging.StreamHandler class로 구성되며 위에서 설정한 <strong>basic</strong> format을 사용함을 알 수 있다. 이 handler의 level은 INFO이다. <strong>file_handler</strong>는 디렉토리 내에 info.log란 파일을 생성하여 로그를 기록하면서 저장하는 handler이다. 이 handler의 level은 DEBUG이다.</p>

<p>마지막 문단에서는 root logger에 대한 설정을 마무리하고 있다.</p>

<p>이제 json 파일을 읽어오자.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">"logging.json"</span><span class="p">,</span> <span class="s">"rt"</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>

<span class="n">logging</span><span class="p">.</span><span class="n">config</span><span class="p">.</span><span class="n">dictConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="n">getLogger</span><span class="p">()</span>
</code></pre></div></div>

<h4 id="222-코드로-세팅">2.2.2. 코드로 세팅</h4>
<p>사실 코드로 세팅한다는 것은 위에 있는 정보들을 코드로 입력한다는 것에 불과하다. 위에서 자세히 설명한 것을 다시 한 번 확인하는 수준이라고 생각하면 될 것이다. 특별할 것이 없으므로 바로 확인해보자.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">make_logger</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="c1">#1 logger instance를 만든다.
</span>    <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="c1">#2 logger의 level을 가장 낮은 수준인 DEBUG로 설정해둔다.
</span>    <span class="n">logger</span><span class="p">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="p">.</span><span class="n">DEBUG</span><span class="p">)</span>

    <span class="c1">#3 formatter 지정
</span>    <span class="n">formatter</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="n">Formatter</span><span class="p">(</span><span class="s">"%(asctime)s - %(name)s - %(levelname)s - %(message)s"</span><span class="p">)</span>
    
    <span class="c1">#4 handler instance 생성
</span>    <span class="n">console</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="n">StreamHandler</span><span class="p">()</span>
    <span class="n">file_handler</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="n">FileHandler</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s">"test.log"</span><span class="p">)</span>
    
    <span class="c1">#5 handler 별로 다른 level 설정
</span>    <span class="n">console</span><span class="p">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="p">.</span><span class="n">INFO</span><span class="p">)</span>
    <span class="n">file_handler</span><span class="p">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="p">.</span><span class="n">DEBUG</span><span class="p">)</span>

    <span class="c1">#6 handler 출력 format 지정
</span>    <span class="n">console</span><span class="p">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
    <span class="n">file_handler</span><span class="p">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>

    <span class="c1">#7 logger에 handler 추가
</span>    <span class="n">logger</span><span class="p">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">console</span><span class="p">)</span>
    <span class="n">logger</span><span class="p">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">file_handler</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">logger</span>
</code></pre></div></div>

<p><strong>#2 과정</strong>에서 만일 가장 낮은 수준으로 level을 설정하지 않는다면, 아래 handler들에서 <strong>setLevel</strong>을 한 것이 무의미해진다는 점을 꼭 알아두길 바란다. (handler 별로 다른 level 설정하기)</p>

<p>위 코드를 보면 <strong>console</strong>에 표기되는 <strong>StreamHandler</strong>에는 <strong>INFO</strong> level을, <strong>파일</strong>에 기록되는 <strong>FileHandler</strong>에는 <strong>DEBUG</strong> level을 설정한 것을 확인할 수 있다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">logger</span> <span class="o">=</span> <span class="n">make_logger</span><span class="p">()</span>

<span class="n">logger</span><span class="p">.</span><span class="n">debug</span><span class="p">(</span><span class="s">"test"</span><span class="p">)</span>
<span class="n">logger</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="s">"test"</span><span class="p">)</span>
<span class="n">logger</span><span class="p">.</span><span class="n">warning</span><span class="p">(</span><span class="s">"test"</span><span class="p">)</span>
</code></pre></div></div>

<p>위와 같은 코드를 입력하면, <strong>console</strong> 창에는 아래와 같이 기록되지만,</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">13</span> <span class="mi">14</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mi">40</span><span class="p">,</span><span class="mi">133</span> <span class="o">-</span> <span class="n">root</span> <span class="o">-</span> <span class="n">INFO</span> <span class="o">-</span> <span class="n">test</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">13</span> <span class="mi">14</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mi">40</span><span class="p">,</span><span class="mi">679</span> <span class="o">-</span> <span class="n">root</span> <span class="o">-</span> <span class="n">WARNING</span> <span class="o">-</span> <span class="n">test</span>
</code></pre></div></div>

<p><strong>test.log file</strong>에는 아래와 같이 기록됨을 확인할 수 있다.</p>

<center><img src="/public/img/2019-12-13-logging/01.JPG" width="70%" /></center>

<hr />
<h2 id="3-format-편리하게-설정하기">3. Format 편리하게 설정하기</h2>
<p>바로 위의 log 기록들은 사실 아주 도움이 되는 정보들이라고 하기는 어렵다. line 번호도 없고, file 이름도 없다. logging 모듈은 이러한 log 기록들을 남길 때 굉장히 다양한 형식을 지원하고 있다. 그 형식에 대해 알아보기 전에 먼저 log 기록들, 즉 <strong>LogRecord Objects</strong>에 대해 알아보도록 하자.</p>

<p><strong>LogRecord 객체</strong>는 Logger에 의해 자동적으로 생성되며, 수동으로 생성하려면 <strong>makeLogRecord</strong> 메서드를 이용하면 된다.</p>

<blockquote>
  <p>logging.LogRecord(name, level, pathname, lineno, msg, …)</p>
</blockquote>

<p>여기서 pathname은 logging call이 만들어지는 소스 파일의 전체 pathname을 의미한다.<br />
lineno는 logging call이 만들어지는 소스파일의 라인 번호를 말한다.<br />
msg는 event description 메시지를 의미한다.</p>

<p>이 LogRecord는 여러 속성(attribute)을 갖고 있는데, 이 속성들은 format을 정의하는데 활용된다.<br />
그 리스트와 설명은 아래와 같다.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">속성 이름</th>
      <th style="text-align: center">format</th>
      <th style="text-align: center">설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">asctime</td>
      <td style="text-align: center">%(asctime)s</td>
      <td style="text-align: center">인간이 읽을 수 있는 시간 표시</td>
    </tr>
    <tr>
      <td style="text-align: center">created</td>
      <td style="text-align: center">%(created)f</td>
      <td style="text-align: center">logRecord가 만들어진 시간</td>
    </tr>
    <tr>
      <td style="text-align: center">filename</td>
      <td style="text-align: center">%(filename)s</td>
      <td style="text-align: center">pathname의 file 이름 부분</td>
    </tr>
    <tr>
      <td style="text-align: center">funcName</td>
      <td style="text-align: center">%(funcName)s</td>
      <td style="text-align: center">logging call을 포함하는 function의 이름</td>
    </tr>
    <tr>
      <td style="text-align: center">levelname</td>
      <td style="text-align: center">%(levelname)s</td>
      <td style="text-align: center">메시지의 Text logging level: 예) INFO</td>
    </tr>
    <tr>
      <td style="text-align: center">lineno</td>
      <td style="text-align: center">%(lineno)d</td>
      <td style="text-align: center">logging call이 발생한 코드의 line 숫자</td>
    </tr>
    <tr>
      <td style="text-align: center">module</td>
      <td style="text-align: center">%(module)s</td>
      <td style="text-align: center">filename의 모듈 이름 부분</td>
    </tr>
    <tr>
      <td style="text-align: center">message</td>
      <td style="text-align: center">%(message)s</td>
      <td style="text-align: center">메시지</td>
    </tr>
    <tr>
      <td style="text-align: center">name</td>
      <td style="text-align: center">%(name)s</td>
      <td style="text-align: center">logger의 이름</td>
    </tr>
    <tr>
      <td style="text-align: center">pathname</td>
      <td style="text-align: center">%(pathname)s</td>
      <td style="text-align: center">full pathname</td>
    </tr>
    <tr>
      <td style="text-align: center">thread</td>
      <td style="text-align: center">%(thread)d</td>
      <td style="text-align: center">thread ID</td>
    </tr>
    <tr>
      <td style="text-align: center">threadName</td>
      <td style="text-align: center">%(threadName)s</td>
      <td style="text-align: center">thread 이름</td>
    </tr>
  </tbody>
</table>

<p>간단한 예는 아래와 같다.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">LOG_FORMAT</span> <span class="o">=</span> <span class="s">"[%(asctime)-10s] (줄 번호: %(lineno)d) %(name)s:%(levelname)s - %(message)s"</span>
<span class="n">logging</span><span class="p">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="n">LOG_FORMAT</span><span class="p">)</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s">"setting"</span><span class="p">)</span>
<span class="n">logger</span><span class="p">.</span><span class="n">setLevel</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="n">logger</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="s">"sth happened"</span><span class="p">)</span>

<span class="p">[</span><span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">16</span> <span class="mi">13</span><span class="p">:</span><span class="mi">53</span><span class="p">:</span><span class="mi">29</span><span class="p">,</span><span class="mi">889</span><span class="p">]</span> <span class="p">(</span><span class="n">줄</span> <span class="n">번호</span><span class="p">:</span> <span class="mi">6</span><span class="p">)</span> <span class="n">setting</span><span class="p">:</span><span class="n">INFO</span> <span class="o">-</span> <span class="n">sth</span> <span class="n">happened</span>
</code></pre></div></div>

<hr />
<h2 id="reference">Reference</h2>
<blockquote>
  <p><a href="https://docs.python.org/3.7/howto/logging.html#when-to-use-logging">공식문서</a>
https://hamait.tistory.com/880
https://www.machinelearningplus.com/python/python-logging-guide/
https://snowdeer.github.io/python/2017/11/17/python-logging-example/</p>
</blockquote>

  </article>
  <script type="text/javascript" async
          src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>
  
  <script data-ad-client="ca-pub-9951774327887666" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

</div>

<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-9951774327887666">
</amp-auto-ads>

<script data-ad-client="ca-pub-9951774327887666" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-9951774327887666"
     data-ad-slot="6606866336"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<script data-ad-client="ca-pub-9951774327887666" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
    <li>
      <h3>
        <a href="/github-usage-09-overall/">
          GitHub 사용법 - 09. Overall
          <small>27 May 2020</small>
        </a>
      </h3>
    </li>
    
    <li>
      <h3>
        <a href="/VAE/">
          Variational AutoEncoder 설명
          <small>25 May 2020</small>
        </a>
      </h3>
    </li>
    
    <li>
      <h3>
        <a href="/AFM/">
          추천 시스템의 기본 - 06. AFM 논문 리뷰 및 Tensorflow 구현
          <small>01 May 2020</small>
        </a>
      </h3>
    </li>
    
  </ul>
</div>

<div id="disqus_thread"></div>
<script>

  /**
   *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
   *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

  var disqus_config = function () {
    this.page.url = 'http://localhost:4000/logging/';
    this.page.identifier = 'http://localhost:4000/logging/';
    //this.page.url = 'https://greeksharifa.github.com/';  // Replace PAGE_URL with your page's canonical URL variable
    //this.page.identifier = 'greeksharifa'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
  };

  (function () { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://greeksharifa.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by
  Disqus.</a></noscript>

  </div>
</div>

<label for="sidebar-checkbox" class="sidebar-toggle"></label>

<script>
  (function (document) {
    let toggle = document.querySelector('.sidebar-toggle');
    let sidebar = document.querySelector('#sidebar');
    let checkbox = document.querySelector('#sidebar-checkbox');

    document.addEventListener('click', function (e) {
      let target = e.target;

      if (target === toggle) {
        checkbox.checked = !checkbox.checked;
        e.preventDefault();
      } else if (checkbox.checked && !sidebar.contains(target)) {
        /* click outside the sidebar when sidebar is open */
        checkbox.checked = false;
      }
    }, false);
  })(document);
</script>

<script>
  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    };
    i[r].l = 1 * new Date();
    a = s.createElement(o);
    m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

  ga('create', 'UA-00000000-1', 'auto');
  ga('send', 'pageview');
</script>


<!-- Naver Analytics -->	
<script type="text/javascript" src="//wcs.naver.net/wcslog.js"></script>
<script type="text/javascript">
  if(!wcs_add) var wcs_add = {};
    wcs_add["wa"] = "18cbce78e94161";
  wcs_do();
</script>

</body>

<script id="dsq-count-scr" src="//greeksharifa-github-io.disqus.com/count.js" async></script>

</html>
